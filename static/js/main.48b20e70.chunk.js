(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,a,t){},10:function(e,a,t){e.exports=t(16)},16:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),i=t(3),o=t.n(i),s=t(4),r=t(5),c=t(6),m=t(8),d=t(7),u=t(9),f=(t(1),function(e){var a=e.className,t=e.name,n=e.value,i=e.callback;return l.a.createElement("button",{className:a,name:t,onClick:i},n)}),g=function(e){var a,t,n=e.resetGameField;return l.a.createElement("div",{className:"modal menu__modal"},l.a.createElement("h3",{className:"title menu__title"},"Please, set up field size and click Ok"),l.a.createElement("form",{className:"menu__form"},l.a.createElement("label",{className:"menu__label",htmlFor:"field-rows"},"Rows"),l.a.createElement("input",{className:"menu__input",name:"rows",type:"text",id:"field-rows",maxLength:"1",placeholder:"0",autoFocus:!0,onChange:function(e){a=+e.currentTarget.value}}),l.a.createElement("label",{className:"menu__label",htmlFor:"field-cols"},"Cols"),l.a.createElement("input",{className:"menu__input",name:"cols",type:"text",id:"field-cols",maxLength:"1",placeholder:"0",onChange:function(e){t=+e.currentTarget.value}})),l.a.createElement(f,{className:"btn menu__btn",name:"apply",value:"Ok",callback:function(){n(a,t)}}))},v=function(e){var a,t=e.saveNewGame;return l.a.createElement("div",{className:"modal menu__modal"},l.a.createElement("h3",{className:"title menu__title"},"Enter game name and click Save"),l.a.createElement("input",{className:"menu__input menu__input--save",name:"saveGame",type:"text",placeholder:"New save",onChange:function(e){a=e.currentTarget.value}}),l.a.createElement(f,{className:"btn menu__btn",name:"save",value:"save",callback:function(){t(a)}}))},w=function(e){for(var a=e.loadSelectedGame,t=[],n=0;n<localStorage.length;n++)localStorage.key(n)&&t.push(localStorage.key(n));var i=t.map(function(e,t){return l.a.createElement("li",{className:"menu__item",key:t,onClick:a},e)});return l.a.createElement("div",{className:"modal menu__modal"},l.a.createElement("h3",{className:"title menu__title"},"Click to load game in a list"),l.a.createElement("ol",{className:"menu__list"},i))},h=function(e){var a=e.isHidden,t=e.isNewField,n=e.isSaveGame,i=e.isLoadGame,o=e.showModal,s=e.resetGameField,r=e.saveNewGame,c=e.loadSelectedGame,m=e.animationToggle;return l.a.createElement("section",{className:"menu main__section"},l.a.createElement("h2",{className:"title menu__title"},"Conway's Game of Life v1.0"),l.a.createElement("p",{className:"menu__subtitle"},"To start playing, click cells on the game field and then push the Start/Stop button."),l.a.createElement(f,{className:"btn menu__btn",name:"newField",value:"set new field",callback:o.bind(void 0,"isNewField")}),l.a.createElement(f,{className:"btn menu__btn",name:"resetField",value:"reset field",callback:s.bind(void 0,null,null)}),l.a.createElement(f,{className:"btn menu__btn",name:"saveGame",value:"save game",callback:o.bind(void 0,"isSaveGame")}),l.a.createElement(f,{className:"btn menu__btn",name:"loadGame",value:"load game",callback:o.bind(void 0,"isLoadGame")}),l.a.createElement(f,{className:"btn menu__btn menu__btn--animation",name:"playGame",value:"life",callback:m}),!a&&t&&l.a.createElement(g,{resetGameField:s}),!a&&n&&l.a.createElement(v,{saveNewGame:r}),!a&&i&&l.a.createElement(w,{loadSelectedGame:c}))},b=function(e){var a=e.isAlive,t=e.changeCellState,n=e.row,i=e.col;return l.a.createElement("div",{className:a?"table__cell table__cell--green":"table__cell",onClick:t.bind(void 0,n,i)})},S=function(e){for(var a=e.rows,t=e.cols,n=e.stateTable,i=e.changeCellState,o=[],s=0;s<a;s++){o[s]=[];for(var r=0;r<t;r++)o[s][r]=l.a.createElement(b,{key:"".concat(s,".").concat(r),row:s,col:r,isAlive:n[s][r],changeCellState:i})}return o.map(function(e,a){return l.a.createElement("div",{className:"table__row",key:a},e)})},_=function(e){var a=e.rows,t=e.cols,n=e.stateTable,i=e.changeCellState;return l.a.createElement("section",{className:"game main__section"},l.a.createElement("div",{className:"table game__table"},l.a.createElement(S,{rows:a,cols:t,stateTable:n,changeCellState:i})))},N=function(e){function a(){var e;return Object(r.a)(this,a),(e=Object(m.a)(this,Object(d.a)(a).call(this))).closeModal=function(){window.addEventListener("keydown",function a(t){27===t.keyCode&&(e.setState({isHidden:!0,isSaveGame:!1,isLoadGame:!1,isNewField:!1}),window.removeEventListener("keydown",a))})},e.showModal=function(a){e.closeModal(),e.setState(Object(s.a)({isHidden:!1},a,!0))},e.resetGameField=function(a,t){e.setState({rows:a||e.initialSize,cols:t||e.initialSize,isNewGame:!0,isHidden:!0,isNewField:!1})},e.saveNewGame=function(a){var t=e.state,n=t.rows,l=t.cols,i=t.stateTable,o=t.game;o.name=a,o.state=i,o.rows=n,o.cols=l,localStorage.setItem(a,JSON.stringify(o)),e.setState({isHidden:!0,isSaveGame:!1})},e.loadSelectedGame=function(a){var t=a.currentTarget.innerText,n=JSON.parse(localStorage.getItem(t)).rows,l=JSON.parse(localStorage.getItem(t)).cols,i=JSON.parse(localStorage.getItem(t)).state;e.setState({isNewGame:!1,isHidden:!0,isLoadGame:!1,rows:n,cols:l,stateTable:i})},e.showMessage=function(e){switch(e){case"all dead":alert("Dear friend, all your population are dead. Game is over, have fun and good luck next time");break;case"stable configuration":alert("Dear friend, your last configuration has a loop. Game is over, have fun and good luck next time");break;case"periodic configuration":alert("Dear friend, one of your configuration has loop. Game is over, have fun and good luck next time");break;default:alert("Game is over with no reasons. Please, restart the game")}},e.checkGameState=function(a,t){var n=e.state,l=n.stateTable,i=n.generation;if(a)if(JSON.stringify(l)===JSON.stringify(t))e.animationToggle(),e.showMessage("stable configuration");else for(var o=0;o<i.length;o++)JSON.stringify(i[o])===JSON.stringify(t)&&(e.animationToggle(),e.showMessage("periodic configuration"));else e.animationToggle(),e.showMessage("all dead")},e.getNextState=function(){for(var a=e.state,t=a.rows,n=a.cols,l=a.stateTable,i=a.generation,o=JSON.parse(JSON.stringify(l)),s=0,r=0;r<t;r++)for(var c=0;c<n;c++){var m=0;r>0&&l[r-1][c]&&m++,r>0&&c>0&&l[r-1][c-1]&&m++,r>0&&c<n-1&&l[r-1][c+1]&&m++,c<n-1&&l[r][c+1]&&m++,c>0&&l[r][c-1]&&m++,r<t-1&&l[r+1][c]&&m++,r<t-1&&c>0&&l[r+1][c-1]&&m++,r<t-1&&c<n-1&&l[r+1][c+1]&&m++,l[r][c]&&s++,l[r][c]&&(m<2||m>3)&&(o[r][c]=!1),l[r][c]||3!==m||(o[r][c]=!0)}e.checkGameState(s,o),i.push(o),e.setState({stateTable:o})},e.animationToggle=function(){e.state.isAnimate?(clearInterval(e.timer),e.setState({isAnimate:!1,generation:[]})):(e.setState({isAnimate:!0}),e.timer=setInterval(e.getNextState,e.animationSpeed))},e.changeCellState=function(a,t){var n=e.state.stateTable;n[a][t]=!n[a][t],e.setState({isNewGame:!1})},e.generateStateTable=function(){for(var a=e.state,t=a.rows,n=a.cols,l=a.stateTable,i=0;i<t;i++){l[i]=[];for(var o=0;o<n;o++)l[i][o]=!1}},e.initialSize=5,e.animationSpeed=1e3,e.state={rows:e.initialSize,cols:e.initialSize,stateTable:[],game:{},generation:[],isNewGame:!0,isHidden:!0,isNewField:!1,isSaveGame:!1,isLoadGame:!1,isAnimate:!1},e}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.state,a=e.isNewGame,t=e.isHidden,n=e.isNewField,i=e.isSaveGame,o=e.isLoadGame,s=e.rows,r=e.cols,c=e.stateTable;return a&&this.generateStateTable(),l.a.createElement("div",{className:"app"},l.a.createElement("main",{className:"main app__main"},l.a.createElement(h,{isHidden:t,isNewField:n,isSaveGame:i,isLoadGame:o,showModal:this.showModal,resetGameField:this.resetGameField,saveNewGame:this.saveNewGame,loadSelectedGame:this.loadSelectedGame,animationToggle:this.animationToggle}),l.a.createElement(_,{rows:s,cols:r,stateTable:c,changeCellState:this.changeCellState})))}}]),a}(n.Component),p=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(l.a.createElement(N,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/life",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat("/life","/service-worker.js");p?(function(e,a){fetch(e).then(function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):G(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):G(a,e)})}}()}},[[10,1,2]]]);
//# sourceMappingURL=main.48b20e70.chunk.js.map